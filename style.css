/* ─── RESET ─── */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html{scroll-behavior:smooth;}
body{
  background:#0a0a0a;
  color:#d0d0d0;
  font-family:'Noto Serif SC',serif;
  overflow-x:hidden;
  -webkit-font-smoothing:antialiased;
}
img{display:block;}
button{cursor:pointer;font-family:inherit;border:none;background:none;}

/* ─── PAGE SYSTEM ─── */
.page{display:none;}
.page.active{display:block;}

/* ════════════════════════════════
   HOME
════════════════════════════════ */
#home{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}
.home-bar{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  padding:36px 56px 0;
  flex-shrink:0;
}
.logo{
  font-family:'Cormorant Garamond',serif;
  font-size:1.5rem;
  font-weight:300;
  letter-spacing:.3em;
  color:#fff;
}
.logo-sub{
  font-family:'Space Mono',monospace;
  font-size:.58rem;
  letter-spacing:.18em;
  color:#333;
  text-transform:uppercase;
}
.slider-area{
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:40px 0 60px;
}
.world-name-display{
  text-align:center;
  margin-bottom:28px;
  min-height:64px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-end;
  gap:8px;
}
.wnd-idx{
  font-family:'Space Mono',monospace;
  font-size:.6rem;
  letter-spacing:.25em;
  color:#2e2e2e;
}
.wnd-name{
  font-family:'Cormorant Garamond',serif;
  font-size:clamp(1.8rem,4vw,3rem);
  font-weight:300;
  letter-spacing:.12em;
  color:#e8e8e8;
  line-height:1;
  transition:opacity .35s,transform .35s;
}
.wnd-en{
  font-family:'Space Mono',monospace;
  font-size:.6rem;
  letter-spacing:.2em;
  color:#2e2e2e;
  text-transform:uppercase;
}

/* Carousel */
.carousel-outer{
  position:relative;
  width:min(90vw,1200px);
  display:flex;
  align-items:center;
  justify-content:center;
}
.carousel-viewport{
  flex:1;
  position:relative;
}
.carousel-track-clip{
  overflow:hidden;
  width:100%;
  position:relative;
}
.carousel-track{
  display:flex;
  transition:transform .55s cubic-bezier(.4,0,.2,1);
  will-change:transform;
}
.slide{
  flex-shrink:0;
  width:100%;
  cursor:pointer;
}
.slide-inner{
  aspect-ratio:16/9;
  position:relative;
  overflow:hidden;
  background:#0f0f0f;
  border:1px solid rgba(255,255,255,.06);
  transition:border-color .3s;
}
.slide:hover .slide-inner{border-color:rgba(255,255,255,.15);}
.slide-bg{
  position:absolute;inset:0;
  background-size:cover;background-position:center;
  filter:grayscale(25%) brightness(.75);
  transition:filter .5s,transform .6s cubic-bezier(.4,0,.2,1);
}
.slide:hover .slide-bg{filter:grayscale(5%) brightness(.9);transform:scale(1.02);}
.slide-overlay{
  position:absolute;inset:0;
  background:linear-gradient(to bottom,transparent 40%,rgba(0,0,0,.45) 100%);
}
.slide-empty{
  position:absolute;inset:0;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:10px;color:#1e1e1e;
}
.slide-empty .se-icon{font-size:2rem;opacity:.2;}
.slide-empty .se-text{font-family:'Space Mono',monospace;font-size:.6rem;letter-spacing:.18em;}
.slide-hint{
  position:absolute;bottom:18px;right:22px;
  font-family:'Space Mono',monospace;
  font-size:.58rem;letter-spacing:.18em;
  color:rgba(255,255,255,.25);
  opacity:0;transition:opacity .3s;text-transform:uppercase;
}
.slide:hover .slide-hint{opacity:1;}
.slide-tagline{
  position:absolute;bottom:18px;left:22px;
  font-size:.72rem;color:rgba(255,255,255,.25);font-style:italic;
  opacity:0;transform:translateY(4px);transition:all .35s .05s;
}
.slide:hover .slide-tagline{opacity:1;transform:none;}

/* Arrows */
.carr-btn{
  flex-shrink:0;
  width:64px;height:64px;
  background:none;border:none;
  color:rgba(255,255,255,.3);font-size:1.1rem;
  display:flex;align-items:center;justify-content:center;
  transition:color .25s;cursor:pointer;
}
.carr-btn:hover{color:rgba(255,255,255,.85);}

/* Dots */
.slider-dots{display:flex;gap:8px;margin-top:28px;}
.sdot{
  width:5px;height:5px;border-radius:50%;
  background:#222;cursor:pointer;transition:all .3s;
}
.sdot.on{background:#666;width:18px;border-radius:2px;}

.home-footer{
  text-align:center;padding:0 0 36px;
  font-family:'Space Mono',monospace;
  font-size:.56rem;letter-spacing:.22em;color:#1e1e1e;text-transform:uppercase;
  flex-shrink:0;
}

/* ════════════════════════════════
   DETAIL
════════════════════════════════ */
#detail{background:#0a0a0a;}
.detail-topbar{
  display:flex;align-items:center;justify-content:space-between;
  padding:26px 56px;
  border-bottom:1px solid rgba(255,255,255,.06);
  position:sticky;top:0;z-index:100;
  background:rgba(10,10,10,.93);backdrop-filter:blur(20px);
}
.back-btn{
  display:flex;align-items:center;gap:10px;
  font-family:'Space Mono',monospace;font-size:.62rem;letter-spacing:.15em;
  color:#333;transition:color .2s;
}
.back-btn:hover{color:#aaa;}
.topbar-name{
  font-family:'Cormorant Garamond',serif;
  font-size:1.05rem;font-weight:300;letter-spacing:.22em;color:#666;
}
.topbar-num{font-family:'Space Mono',monospace;font-size:.58rem;letter-spacing:.12em;color:#252525;}

/* Sections */
.d-sec{
  padding:72px 56px;
  border-bottom:1px solid rgba(255,255,255,.05);
  opacity:0;transform:translateY(22px);
  transition:opacity .65s cubic-bezier(.4,0,.2,1),transform .65s cubic-bezier(.4,0,.2,1);
}
.d-sec.vis{opacity:1;transform:none;}
.sec-lbl{
  font-family:'Space Mono',monospace;font-size:.58rem;letter-spacing:.3em;
  color:#282828;text-transform:uppercase;margin-bottom:44px;
  display:flex;align-items:center;gap:14px;
}
.sec-lbl::after{content:'';flex:1;height:1px;background:rgba(255,255,255,.05);}

/* Characters + Gallery */
.cg-grid{display:grid;grid-template-columns:260px 1fr;gap:60px;align-items:start;}
.char-stack{display:flex;flex-direction:column;gap:52px;}
.char-card.flip .char-body{text-align:right;}
.char-card.flip .char-tags{justify-content:flex-end;}
.char-portrait{
  width:100%;aspect-ratio:3/4;background:#0f0f0f;
  border:1px solid rgba(255,255,255,.05);
  overflow:hidden;margin-bottom:18px;position:relative;
}
.char-portrait img{width:100%;height:100%;object-fit:cover;filter:grayscale(15%);}
.portrait-ph{
  position:absolute;inset:0;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:6px;color:#1e1e1e;
}
.portrait-ph .phi{font-size:1.4rem;opacity:.2;}
.portrait-ph .pht{font-family:'Space Mono',monospace;font-size:.55rem;letter-spacing:.15em;}
.char-name{
  font-family:'Cormorant Garamond',serif;
  font-size:1.4rem;font-weight:300;letter-spacing:.08em;color:#ddd;margin-bottom:3px;
}
.char-name-en{font-family:'Space Mono',monospace;font-size:.58rem;letter-spacing:.15em;color:#2a2a2a;margin-bottom:12px;}
.char-tags{display:flex;flex-wrap:wrap;gap:5px;margin-bottom:12px;}
.char-tag{font-size:.62rem;padding:2px 8px;border:1px solid rgba(255,255,255,.08);color:#444;letter-spacing:.05em;}
.char-bio{font-size:.78rem;line-height:2.1;color:#444;}

.gal-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:7px;}
.gi{
  aspect-ratio:3/4;background:#0f0f0f;
  border:1px solid rgba(255,255,255,.05);
  overflow:hidden;cursor:pointer;position:relative;transition:border-color .3s;
}
.gi:first-child{grid-column:span 2;aspect-ratio:16/9;}
.gi:hover{border-color:rgba(255,255,255,.14);}
.gi img{width:100%;height:100%;object-fit:cover;filter:grayscale(10%);transition:filter .4s,transform .4s;}
.gi:hover img{filter:grayscale(0%);transform:scale(1.03);}
.gi-empty{
  position:absolute;inset:0;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:5px;color:#1e1e1e;
}
.gi-empty .ge{font-size:1.1rem;opacity:.2;}
.gi-empty .gt{font-family:'Space Mono',monospace;font-size:.52rem;letter-spacing:.12em;}

/* Video + Novel */
.vn-grid{display:grid;grid-template-columns:1fr 1fr;gap:40px;align-items:stretch;}
.vid-wrap{border:1px solid rgba(255,255,255,.06);background:#0d0d0d;}
.vid-frame{
  aspect-ratio:16/9;background:#000;
  position:relative;display:flex;align-items:center;justify-content:center;overflow:hidden;
}
.vid-frame video,.vid-frame iframe{width:100%;height:100%;border:none;display:block;}
.vid-ph{display:flex;flex-direction:column;align-items:center;gap:8px;color:#1e1e1e;text-align:center;}
.vid-ph .vi{font-size:1.8rem;opacity:.2;}
.vid-ph p{font-family:'Space Mono',monospace;font-size:.58rem;letter-spacing:.1em;line-height:1.9;}
.vid-info{padding:14px 16px;border-top:1px solid rgba(255,255,255,.05);display:flex;justify-content:space-between;align-items:baseline;}
.v-t{font-size:.78rem;color:#888;}
.v-d{font-family:'Space Mono',monospace;font-size:.58rem;color:#282828;}

.nv-wrap{border:1px solid rgba(255,255,255,.06);background:#0d0d0d;display:flex;flex-direction:column;height:100%;}
.nv-head{padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.05);display:flex;justify-content:space-between;align-items:center;}
.nv-title{font-size:.78rem;color:#888;}
.nv-pg{font-family:'Space Mono',monospace;font-size:.56rem;color:#282828;}
.nv-body{flex:1;position:relative;overflow:hidden;min-height:0;}
.nv-page{
  position:absolute;inset:0;padding:22px 20px;
  font-size:.8rem;line-height:2.2;color:#ccc;
  opacity:0;transform:translateX(28px);
  transition:opacity .35s,transform .35s;
  pointer-events:none;overflow-y:auto;
}
.nv-page.on{opacity:1;transform:none;pointer-events:auto;}
.nv-page p{margin-bottom:1.1em;text-indent:2em;}
.nv-foot{padding:9px 16px;border-top:1px solid rgba(255,255,255,.05);display:flex;align-items:center;justify-content:space-between;}
.nvbtn{font-family:'Space Mono',monospace;font-size:.58rem;letter-spacing:.08em;color:#282828;padding:4px 0;transition:color .2s;}
.nvbtn:hover{color:#aaa;}
.nvbtn:disabled{opacity:.2;cursor:default;}
.nv-dots{display:flex;gap:4px;}
.nvdot{width:4px;height:4px;border-radius:50%;background:#1e1e1e;cursor:pointer;transition:all .25s;}
.nvdot.on{background:#666;width:11px;border-radius:2px;}

/* Chat */
.chat-wrap{max-width:760px;margin:0 auto;}
.chat-tabs{
  display:none;
  border:1px solid rgba(255,255,255,.08);
  border-bottom:none;
  background:#0d0d0d;
}
.chat-tabs.visible{display:flex;}
.ctab{
  flex:1;padding:11px 16px;display:flex;align-items:center;gap:8px;
  color:#444;font-size:.78rem;
  border-right:1px solid rgba(255,255,255,.06);
  transition:all .2s;letter-spacing:.03em;
}
.ctab:last-child{border-right:none;}
.ctab:hover{color:#aaa;background:rgba(255,255,255,.03);}
.ctab.on{color:#ddd;background:#111;}
.ctab-av{
  width:20px;height:20px;border-radius:50%;background:#1a1a1a;
  border:1px solid rgba(255,255,255,.08);
  overflow:hidden;display:flex;align-items:center;justify-content:center;
  font-size:.6rem;color:#555;flex-shrink:0;
}
.ctab-av img{width:100%;height:100%;object-fit:cover;}
.ctab-alias{font-family:'Space Mono',monospace;font-size:.56rem;color:#333;margin-left:auto;}

.chat-box{border:1px solid rgba(255,255,255,.06);background:#0d0d0d;}
.chat-hd{padding:13px 16px;border-bottom:1px solid rgba(255,255,255,.05);display:flex;align-items:center;gap:10px;}
.chat-av{
  width:34px;height:34px;border-radius:50%;
  background:#141414;border:1px solid rgba(255,255,255,.06);
  overflow:hidden;display:flex;align-items:center;justify-content:center;
  font-size:.8rem;color:#333;flex-shrink:0;
}
.chat-av img{width:100%;height:100%;object-fit:cover;}
.chat-cn{font-size:.82rem;color:#bbb;}
.chat-cr{font-size:.62rem;color:#2e2e2e;margin-top:2px;}
.chat-ol{
  margin-left:auto;font-family:'Space Mono',monospace;
  font-size:.56rem;color:#3a5a4a;display:flex;align-items:center;gap:4px;
}
.chat-ol::before{content:'';width:4px;height:4px;background:#3a5a4a;border-radius:50%;animation:pulse 2.5s ease-in-out infinite;}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.25}}

.chat-msgs{
  height:340px;overflow-y:auto;padding:16px;
  display:flex;flex-direction:column;gap:10px;
  scrollbar-width:thin;scrollbar-color:#161616 transparent;
}
.cm{display:flex;gap:7px;max-width:80%;animation:mi .2s ease;}
@keyframes mi{from{opacity:0;transform:translateY(4px)}}
.cm.u{margin-left:auto;flex-direction:row-reverse;}
.cm-av{
  width:26px;height:26px;border-radius:50%;
  background:#141414;border:1px solid rgba(255,255,255,.05);
  display:flex;align-items:center;justify-content:center;
  font-size:.65rem;color:#333;flex-shrink:0;margin-top:2px;
}
.cm-av img{width:100%;height:100%;object-fit:cover;border-radius:50%;}
.cm-b{padding:9px 12px;font-size:.8rem;line-height:1.8;}
.cm.ai .cm-b{background:#141414;border:1px solid rgba(255,255,255,.05);border-radius:2px 9px 9px 9px;color:#888;}
.cm.u .cm-b{background:#161616;border:1px solid rgba(255,255,255,.09);border-radius:9px 2px 9px 9px;color:#bbb;}
.tds{display:flex;gap:3px;padding:3px 0;}
.td{width:4px;height:4px;background:#2a2a2a;border-radius:50%;animation:td 1.2s ease-in-out infinite;}
.td:nth-child(2){animation-delay:.2s}.td:nth-child(3){animation-delay:.4s}
@keyframes td{0%,60%,100%{transform:translateY(0)}30%{transform:translateY(-4px)}}

.chat-input-row{padding:10px 12px;border-top:1px solid rgba(255,255,255,.05);display:flex;gap:7px;}
.chat-ta{
  flex:1;background:rgba(255,255,255,.02);
  border:1px solid rgba(255,255,255,.06);
  padding:8px 11px;color:#bbb;
  font-family:'Noto Serif SC',serif;font-size:.8rem;
  resize:none;outline:none;line-height:1.6;
  transition:border-color .2s;min-height:38px;max-height:100px;
}
.chat-ta:focus{border-color:rgba(255,255,255,.16);}
.chat-ta::placeholder{color:#222;}
.chat-send{
  background:#141414;border:1px solid rgba(255,255,255,.08);
  color:#444;width:38px;font-size:.85rem;
  transition:all .2s;flex-shrink:0;
}
.chat-send:hover{color:#bbb;border-color:rgba(255,255,255,.18);}
.chat-send:disabled{opacity:.25;cursor:not-allowed;}

/* ════════════════════════════════
   MUSIC PLAYER
════════════════════════════════ */
#mp{position:fixed;bottom:22px;right:22px;z-index:500;display:flex;flex-direction:column;align-items:flex-end;gap:7px;}
.mp-panel{width:248px;background:#0d0d0d;border:1px solid rgba(255,255,255,.08);padding:15px 16px;display:none;}
.mp-panel.op{display:block;}
.mp-tname{font-size:.78rem;color:#bbb;margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.mp-tart{font-family:'Space Mono',monospace;font-size:.55rem;color:#2a2a2a;margin-bottom:10px;}
.mp-prog{width:100%;height:1px;background:#1a1a1a;margin-bottom:10px;cursor:pointer;}
.mp-fill{height:100%;background:#555;width:0%;transition:width .5s linear;}
.mp-ctrls{display:flex;align-items:center;justify-content:space-between;}
.mpb{color:#2a2a2a;font-size:.8rem;padding:4px;transition:color .2s;}
.mpb:hover{color:#aaa;}
.mp-pp{width:30px;height:30px;background:#141414;border:1px solid rgba(255,255,255,.08);color:#666;font-size:.75rem;display:flex;align-items:center;justify-content:center;transition:all .2s;}
.mp-pp:hover{color:#ccc;border-color:rgba(255,255,255,.18);}
.mp-list{margin-top:10px;border-top:1px solid rgba(255,255,255,.05);padding-top:9px;display:none;}
.mp-list.op{display:block;}
.pl-item{display:flex;align-items:center;gap:7px;padding:5px 0;cursor:pointer;}
.pl-n{font-family:'Space Mono',monospace;font-size:.55rem;color:#252525;width:11px;}
.pl-t{font-size:.72rem;color:#333;flex:1;transition:color .2s;}
.pl-item:hover .pl-t{color:#aaa;}
.pl-item.on .pl-t{color:#777;}
.mp-fab{
  width:38px;height:38px;background:#0d0d0d;
  border:1px solid rgba(255,255,255,.08);
  color:#2e2e2e;font-size:.95rem;
  display:flex;align-items:center;justify-content:center;transition:all .2s;
}
.mp-fab:hover{color:#aaa;border-color:rgba(255,255,255,.16);}
.mp-fab.on{color:#666;}

/* ════════════════════════════════
   LIGHTBOX
════════════════════════════════ */
#lb{display:none;position:fixed;inset:0;z-index:900;background:rgba(0,0,0,.96);align-items:center;justify-content:center;padding:20px;}
#lb.op{display:flex;}
#lb img{max-width:90vw;max-height:90vh;object-fit:contain;}
.lb-x{position:absolute;top:20px;right:22px;font-size:1.5rem;color:#2a2a2a;transition:color .2s;}
.lb-x:hover{color:#aaa;}

/* ════════════════════════════════
   SCROLLBAR
════════════════════════════════ */
::-webkit-scrollbar{width:3px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:#191919;}

/* ════════════════════════════════
   RESPONSIVE
════════════════════════════════ */
@media(max-width:900px){
  .home-bar{padding:24px 24px 0;}
  .detail-topbar,.d-sec{padding-left:24px;padding-right:24px;}
  .cg-grid{grid-template-columns:1fr;gap:36px;}
  .vn-grid{grid-template-columns:1fr;gap:20px;}
}
@media(max-width:600px){
  .logo-sub{display:none;}
}